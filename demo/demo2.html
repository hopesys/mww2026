import React, { useState, useEffect, useRef } from 'react';
import {
Heart, Menu, X, User, Upload, CheckCircle, Globe, Star,
Calendar, MapPin, Facebook, Instagram, Youtube, Search,
Award, Languages, ChevronRight, ChevronLeft, Phone, Mail,
FileText, Image as ImageIcon, AlertCircle, PlayCircle,
CheckSquare, Square, Download, Loader2, Send, Zap
} from 'lucide-react';

// --- CONSTANTS & THEME ---
const THEME = {
primary: "bg-[#0a5138]", // Wellness Green
primaryHover: "hover:bg-[#08422d]",
secondary: "bg-[#ca8a04]", // Wellness Gold
secondaryHover: "hover:bg-[#b27b03]",
textGold: "text-[#ca8a04]",
textGreen: "text-[#0a5138]",
light: "bg-[#f0f9ff]",
error: "text-red-500 border-red-500",
};

// --- MOCK DATA ---
const EXECUTIVES = [
{ id: 1, name: "Dr. Kriengsak Chareonwongsak", role: "Founder & Chairman", roleTh: "ผู้ก่อตั้งและประธานกองประกวด",
image: "https://images.unsplash.com/photo-1560250097-0b93528c311a?auto=format&fit=crop&q=80&w=200" },
{ id: 2, name: "Ms. Sakuna Rojanapanich", role: "Managing Director (MWW)", roleTh: "กรรมการผู้จัดการ (MWW)", image:
"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?auto=format&fit=crop&q=80&w=200" },
{ id: 3, name: "Ms. Montakarn Jaiareebamrung", role: "Managing Director (MWWT)", roleTh: "กรรมการผู้จัดการ (MWWT)",
image: "https://images.unsplash.com/photo-1580489944761-15a19d654956?auto=format&fit=crop&q=80&w=200" },
];

const MOCK_CONTESTANTS = [
{ id: 1, name: "Fahsai Jaisaward", nameTh: "ฟ้าใส ใจสะอาด", province: "Chiang Mai", provinceTh: "เชียงใหม่", number:
"MWWT01", votes: 1250, image:
"https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&q=80&w=400" },
{ id: 2, name: "Rinda Pasuk", nameTh: "รินดา พาสุข", province: "Phuket", provinceTh: "ภูเก็ต", number: "MWWT02", votes:
980, image: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?auto=format&fit=crop&q=80&w=400" },
{ id: 3, name: "Mintra Wellness", nameTh: "มินตรา เวลเนส", province: "Bangkok", provinceTh: "กรุงเทพฯ", number:
"MWWT03", votes: 3400, image:
"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80&w=400" },
{ id: 4, name: "Anna Sukkapap", nameTh: "แอนนา สุขภาพ", province: "Khon Kaen", provinceTh: "ขอนแก่น", number: "MWWT04",
votes: 850, image: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&q=80&w=400" },
];

// --- TRANSLATIONS ---
const TRANSLATIONS = {
th: {
nav: { home: "หน้าแรก", about: "เกี่ยวกับเรา", vote: "โหวต", register: "สมัครประกวด", contact: "ติดต่อเรา" },
hero: {
slogan: "Beauty with Wellness",
sloganSub: "สวย สร้าง สุข",
desc: "เวทีประกวดระดับโลกที่เฟ้นหาผู้หญิงต้นแบบด้านสุขภาวะ (Wellness Ambassador) เพื่อผลักดันประเทศไทยสู่การเป็น
\"เมืองหลวงสุขสภาพโลก\"",
btnRegister: "สมัครประกวดทันที",
btnInfo: "รายละเอียดโครงการ"
},
about: {
title: "เกี่ยวกับกองประกวด",
vision: { title: "วิสัยทัศน์ (Vision)", text: "ส่งเสริมให้ประเทศไทยเป็นเมืองหลวงสุขสภาพโลก (World Wellness Capital)" },
mission: { title: "พันธกิจ (Mission)", text: "เฟ้นหา Wellness Ambassador
เพื่อเสริมสร้างภาพลักษณ์และสร้างความตระหนักด้านสุขภาวะแก่ผู้คน" },
coreValue: { title: "ค่านิยมหลัก (Core Value)", list: ["ดี เก่ง กล้า (Be Good - Be Great - Be Brave)", "ดีเหนืองาม
(Goodness above Beauty)", "สวยแท้จากภายใน (True Beauty from Inner Wellness)", "อุดมสุขสภาพ สร้างอุดมความงาม (Full
Wellness brings Full Beauty)"] }
},
register: {
title: "ใบสมัคร Miss Wellness World Thailand 2025",
qualifyTitle: "ตรวจสอบคุณสมบัติ",
steps: ["คุณสมบัติ", "ข้อมูลส่วนตัว", "สัดส่วน&สุขภาพ", "การศึกษา&งาน", "ติดต่อ", "หลักฐาน"],
sections: {
qualify: "คุณสมบัติเบื้องต้นของผู้สมัคร",
personal: "ข้อมูลส่วนตัว (Personal Info)",
body: "สัดส่วนและสุขภาพ (Body & Health)",
education: "การศึกษาและอาชีพ (Education & Career)",
contact: "ข้อมูลติดต่อ (Contact Info)",
media: "หลักฐานและชำระเงิน (Evidence & Payment)"
},
fields: {
prefix: "คำนำหน้า",
firstName: "ชื่อจริง (ไทย)",
lastName: "นามสกุล (ไทย)",
firstNameEn: "First Name (Eng)",
lastNameEn: "Last Name (Eng)",
nickname: "ชื่อเล่น",
idCard: "เลขบัตรประชาชน",
birthDate: "วันเกิด",
age: "อายุ (ปี)",
height: "ส่วนสูง (cm)",
weight: "น้ำหนัก (kg)",
bust: "รอบอก (นิ้ว)",
waist: "รอบเอว (นิ้ว)",
hips: "รอบสะโพก (นิ้ว)",
disease: "โรคประจำตัว",
talent: "ความสามารถพิเศษ",
experience: "ประสบการณ์ประกวด",
eduLevel: "ระดับการศึกษา",
university: "สถาบันการศึกษา",
occupation: "อาชีพ",
phone: "เบอร์โทรศัพท์",
line: "Line ID",
facebook: "Facebook",
instagram: "Instagram",
tiktok: "TikTok",
emergency: "บุคคลติดต่อฉุกเฉิน",
emergencyRel: "ความเกี่ยวข้อง",
emergencyTel: "เบอร์ติดต่อฉุกเฉิน",
video: "ลิงก์วิดีโอแนะนำตัว",
slip: "สลิปโอนเงิน (500 บาท)",
photo: "รูปถ่ายผู้สมัคร"
},
qualifications: [
"เพศหญิงโดยกำเนิด และมีสัญชาติไทย",
"อายุ 18 - 29 ปี (ณ วันที่สมัคร)",
"สถานภาพโสด ไม่เคยผ่านการสมรสหรือมีบุตร",
"ไม่มีประวัติอาชญากรรม หรือประกอบอาชีพผิดกฎหมาย",
"สุขภาพดี ไม่เป็นโรคที่สังคมรังเกียจ"
],
btnNext: "ถัดไป",
btnBack: "ย้อนกลับ",
btnSubmit: "ยืนยันการสมัคร",
btnReview: "ตรวจสอบข้อมูล",
success: "สมัครเรียบร้อยแล้ว!",
successDesc: "ระบบกำลังส่งอีเมลยืนยันพร้อม PDF ใบสมัครไปยัง",
processing: "กำลังสร้างไฟล์ PDF และส่งข้อมูล...",
downloadPdf: "ดาวน์โหลดใบสมัคร (PDF)",
checkEmail: "กรุณาตรวจสอบ Inbox/Junk Mail ของท่าน"
},
vote: {
title: "ร่วมโหวต Popular Vote",
subtitle: "Miss Wellness World Thailand 2025",
search: "ค้นหาผู้เข้าประกวด...",
voteBtn: "โหวต (10 บาท/คะแนน)",
currentScore: "คะแนนปัจจุบัน"
}
},
en: {
nav: { home: "Home", about: "About Us", vote: "Vote", register: "Register", contact: "Contact" },
hero: {
slogan: "Beauty with Wellness",
sloganSub: "Create Happiness",
desc: "A global stage to find the Wellness Ambassador to drive Thailand towards becoming the \"World Wellness
Capital\".",
btnRegister: "Register Now",
btnInfo: "Project Details"
},
about: {
title: "About The Organization",
vision: { title: "Vision", text: "To promote Thailand as the World Wellness Capital." },
mission: { title: "Mission", text: "To be a Wellness Ambassador, enhancing Thailand's image and raising awareness of
wellness." },
coreValue: { title: "Core Values", list: ["Be Good - Be Great - Be Brave", "Goodness above Beauty", "True Beauty from
Inner Wellness", "Full Wellness brings Full Beauty"] }
},
register: {
title: "Application Form MWWT 2025",
qualifyTitle: "Qualification Check",
steps: ["Qualify", "Personal", "Body", "Edu/Work", "Contact", "Evidence"],
sections: {
qualify: "Preliminary Qualifications",
personal: "Personal Information",
body: "Body & Health Stats",
education: "Education & Career",
contact: "Contact Information",
media: "Evidence & Payment"
},
fields: {
prefix: "Prefix",
firstName: "First Name (TH)",
lastName: "Last Name (TH)",
firstNameEn: "First Name (EN)",
lastNameEn: "Last Name (EN)",
nickname: "Nickname",
idCard: "ID Card Number",
birthDate: "Date of Birth",
age: "Age",
height: "Height (cm)",
weight: "Weight (kg)",
bust: "Bust (in)",
waist: "Waist (in)",
hips: "Hips (in)",
disease: "Congenital Disease",
talent: "Special Talents",
experience: "Pageant Experience",
eduLevel: "Education Level",
university: "University/Institution",
occupation: "Occupation",
phone: "Phone Number",
line: "Line ID",
facebook: "Facebook",
instagram: "Instagram",
tiktok: "TikTok",
emergency: "Emergency Contact",
emergencyRel: "Relation",
emergencyTel: "Emergency Phone",
video: "Intro Video Link",
slip: "Payment Slip (500 THB)",
photo: "Applicant Photos"
},
qualifications: [
"Female by birth and Thai nationality",
"Age 18 - 29 years old",
"Single, never married or had children",
"No criminal record",
"Good physical and mental health"
],
btnNext: "Next",
btnBack: "Back",
btnSubmit: "Submit Application",
btnReview: "Review Data",
success: "Registration Successful!",
successDesc: "System is sending confirmation email with PDF to",
processing: "Generating PDF & Sending Email...",
downloadPdf: "Download Application (PDF)",
checkEmail: "Please check your Inbox/Junk Mail"
},
vote: {
title: "Vote for Popular Vote",
subtitle: "Miss Wellness World Thailand 2025",
search: "Search contestants...",
voteBtn: "Vote (10 THB/Point)",
currentScore: "Current Votes"
}
}
};

// --- HELPER COMPONENTS ---

const InputGroup = ({ label, name, type = "text", value, onChange, placeholder, required = false, width = "full" }) => (
<div className={`mb-4 ${width==='half' ? 'w-full md:w-[48%]' : 'w-full' }`}>
    <label className="block text-sm font-medium text-gray-700 mb-1">
        {label} {required && <span className="text-red-500">*</span>}
    </label>
    <input type={type} name={name} value={value} onChange={onChange} placeholder={placeholder} className={`w-full p-3
        border rounded-xl focus:ring-2 focus:ring-[#0a5138] focus:border-transparent transition-all duration-200
        outline-none ${value ? 'bg-green-50/30 border-[#0a5138]/30' : 'bg-white border-gray-200' }`}
        required={required} />
</div>
);

const SelectGroup = ({ label, name, value, onChange, options, required = false, width = "full" }) => (
<div className={`mb-4 ${width==='half' ? 'w-full md:w-[48%]' : 'w-full' }`}>
    <label className="block text-sm font-medium text-gray-700 mb-1">
        {label} {required && <span className="text-red-500">*</span>}
    </label>
    <div className="relative">
        <select name={name} value={value} onChange={onChange} className={`w-full p-3 border rounded-xl focus:ring-2
            focus:ring-[#0a5138] focus:border-transparent transition-all duration-200 outline-none appearance-none
            ${value ? 'bg-green-50/30 border-[#0a5138]/30' : 'bg-white border-gray-200' }`} required={required}>
            <option value="">-- Select --</option>
            {options.map((opt, idx) => (
            <option key={idx} value={opt}>{opt}</option>
            ))}
        </select>
        <div className="absolute right-3 top-3.5 pointer-events-none text-gray-400">
            <ChevronRight className="rotate-90" size={16} />
        </div>
    </div>
</div>
);

const FileUpload = ({ label, icon: Icon, onFileChange }) => {
const [fileName, setFileName] = useState(null);
const [preview, setPreview] = useState(null);

const handleFile = (e) => {
const file = e.target.files[0];
if (file) {
setFileName(file.name);
setPreview(URL.createObjectURL(file));
onFileChange(file);
}
};

return (
<div
    className="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:bg-green-50 hover:border-[#0a5138] cursor-pointer transition-all duration-300 group relative overflow-hidden">
    <input type="file" className="absolute inset-0 w-full h-full opacity-0 cursor-pointer" onChange={handleFile}
        accept="image/*" />

    {preview ? (
    <div className="relative z-10">
        <img src={preview} alt="Preview" className="h-32 mx-auto rounded-lg shadow-sm object-cover" />
        <p className="mt-2 text-sm text-[#0a5138] font-medium truncate px-4">{fileName}</p>
        <div className="absolute -top-2 -right-2 bg-white rounded-full p-1 shadow-md">
            <CheckCircle size={20} className="text-green-500" />
        </div>
    </div>
    ) : (
    <div className="relative z-10">
        <div
            className="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 group-hover:bg-white group-hover:scale-110 transition-transform">
            <Icon className="text-gray-400 group-hover:text-[#0a5138]" size={24} />
        </div>
        <span className="text-sm text-gray-500 font-medium">{label}</span>
        <p className="text-xs text-gray-400 mt-1">Click or Drag file here</p>
    </div>
    )}
</div>
);
};

// --- MAIN COMPONENTS ---

const Navbar = ({ activeTab, setActiveTab, lang, setLang }) => {
const [isOpen, setIsOpen] = useState(false);
const t = TRANSLATIONS[lang].nav;

return (
<nav className={`sticky top-0 z-50 ${THEME.primary} text-white shadow-xl backdrop-blur-md bg-opacity-95`}>
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-20">
            <div className="flex items-center gap-3 cursor-pointer group" onClick={()=> setActiveTab('home')}>
                <div
                    className="w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-md group-hover:rotate-12 transition-transform duration-500">
                    <Heart className="text-[#0a5138]" fill="#0a5138" size={24} />
                </div>
                <div className="flex flex-col">
                    <span className="font-bold text-lg leading-none tracking-wide">MISS WELLNESS WORLD</span>
                    <span className="text-xs text-[#ca8a04] font-bold tracking-[0.3em] mt-1">THAILAND</span>
                </div>
            </div>

            <div className="hidden md:flex items-center space-x-2">
                {['home', 'about', 'vote', 'register'].map((item) => (
                <button key={item} onClick={()=> setActiveTab(item)}
                    className={`px-5 py-2 rounded-full text-sm font-medium transition-all duration-300 relative
                    overflow-hidden group ${
                    activeTab === item ? 'bg-[#ca8a04] text-white shadow-lg' : 'hover:bg-white/10 text-gray-100'
                    }`}
                    >
                    <span className="relative z-10">{t[item]}</span>
                    {activeTab === item && <span className="absolute inset-0 bg-white/20 animate-pulse"></span>}
                </button>
                ))}

                <div className="h-6 w-px bg-white/20 mx-4"></div>

                <button onClick={()=> setLang(lang === 'th' ? 'en' : 'th')}
                    className="flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold border border-white/30
                    hover:bg-white/10 transition active:scale-95"
                    >
                    <Globe size={14} />
                    <span>{lang.toUpperCase()}</span>
                </button>
            </div>

            <div className="md:hidden">
                <button onClick={()=> setIsOpen(!isOpen)} className="p-2 text-gray-300 hover:text-white">
                    {isOpen ?
                    <X /> :
                    <Menu />}
                </button>
            </div>
        </div>
    </div>

    {/* Mobile Menu */}
    {isOpen && (
    <div className="md:hidden bg-[#08422d] border-t border-white/10 animate-fade-in-down">
        <div className="px-2 pt-2 pb-3 space-y-1">
            {['home', 'about', 'vote', 'register'].map((item) => (
            <button key={item} onClick={()=> { setActiveTab(item); setIsOpen(false); }}
                className="block w-full text-left px-4 py-3 rounded-lg text-base font-medium text-gray-200
                hover:text-white hover:bg-white/10 transition-colors"
                >
                {t[item]}
            </button>
            ))}
        </div>
    </div>
    )}
</nav>
);
};

const HeroSection = ({ onRegisterClick, lang }) => {
const t = TRANSLATIONS[lang].hero;
return (
<div className="relative h-[650px] flex items-center justify-center overflow-hidden bg-gray-900">
    <div className="absolute inset-0 bg-cover bg-center" style={{
        backgroundImage: 'url("https://images.unsplash.com/photo-1598387181032-a3103a2db5b3?q=80&w=2076&auto=format&fit=crop")'
        , filter: 'brightness(0.5)' }}></div>
    <div className="absolute inset-0 bg-gradient-to-t from-[#0a5138] via-transparent to-transparent opacity-90"></div>

    <div className="relative z-10 text-center px-4 max-w-5xl mx-auto">
        <div className="inline-block animate-fade-in-up">
            <span
                className="bg-[#ca8a04] text-white px-6 py-2 rounded-full text-sm font-bold tracking-widest uppercase shadow-lg mb-6 inline-block">
                Official Application 2025
            </span>
        </div>
        <h1 className="text-5xl md:text-7xl font-extrabold text-white mb-4 drop-shadow-2xl leading-tight">
            {t.slogan}<br />
            <span
                className="text-transparent bg-clip-text bg-gradient-to-r from-[#ca8a04] to-yellow-300 font-serif italic">
                {t.sloganSub}
            </span>
        </h1>
        <p className="text-lg md:text-2xl text-gray-200 mb-10 max-w-3xl mx-auto font-light leading-relaxed">
            {t.desc}
        </p>
        <div className="flex flex-col sm:flex-row gap-6 justify-center animate-fade-in-up">
            <button onClick={onRegisterClick} className={`${THEME.secondary} ${THEME.secondaryHover} text-white px-10
                py-4 rounded-full font-bold text-lg transition-all transform hover:scale-105
                shadow-[0_0_20px_rgba(202,138,4,0.5)] flex items-center justify-center gap-2`}>
                <User size={20} />
                {t.btnRegister}
            </button>
            <button
                className="backdrop-blur-sm border-2 border-white/50 bg-white/10 text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-white hover:text-[#0a5138] transition-all flex items-center justify-center gap-2">
                <FileText size={20} />
                {t.btnInfo}
            </button>
        </div>
    </div>
</div>
);
};

const AboutSection = ({ lang }) => {
const t = TRANSLATIONS[lang].about;
return (
<div className="bg-gradient-to-b from-white to-[#f0f9ff] py-20">
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-[#0a5138] mb-4">{t.title}</h2>
            <div className="w-24 h-1.5 bg-[#ca8a04] mx-auto rounded-full"></div>
        </div>

        {/* Vision & Mission Cards */}
        <div className="grid md:grid-cols-2 gap-8 mb-16">
            <div
                className="bg-white p-8 rounded-2xl shadow-xl border-t-4 border-[#0a5138] hover:shadow-2xl transition duration-300">
                <div
                    className="w-14 h-14 bg-green-100 rounded-full flex items-center justify-center mb-6 text-[#0a5138]">
                    <Globe size={32} />
                </div>
                <h3 className="text-2xl font-bold text-gray-800 mb-4">{t.vision.title}</h3>
                <p className="text-gray-600 text-lg leading-relaxed">{t.vision.text}</p>
            </div>
            <div
                className="bg-white p-8 rounded-2xl shadow-xl border-t-4 border-[#ca8a04] hover:shadow-2xl transition duration-300">
                <div
                    className="w-14 h-14 bg-yellow-100 rounded-full flex items-center justify-center mb-6 text-[#ca8a04]">
                    <Star size={32} />
                </div>
                <h3 className="text-2xl font-bold text-gray-800 mb-4">{t.mission.title}</h3>
                <p className="text-gray-600 text-lg leading-relaxed">{t.mission.text}</p>
            </div>
        </div>

        {/* Core Values */}
        <div className="bg-[#0a5138] rounded-3xl p-10 md:p-16 text-white shadow-2xl relative overflow-hidden">
            <div className="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -mr-16 -mt-16 blur-3xl"></div>
            <div className="absolute bottom-0 left-0 w-64 h-64 bg-[#ca8a04]/20 rounded-full -ml-16 -mb-16 blur-3xl">
            </div>

            <h3 className="text-3xl font-bold mb-8 text-center border-b border-white/20 pb-4 relative z-10">
                {t.coreValue.title}</h3>
            <div className="grid md:grid-cols-2 gap-6 relative z-10">
                {t.coreValue.list.map((val, idx) => (
                <div key={idx} className="flex items-start gap-4 p-4 rounded-xl hover:bg-white/5 transition">
                    <CheckCircle className="text-[#ca8a04] shrink-0 mt-1" />
                    <span className="text-lg font-light">{val}</span>
                </div>
                ))}
            </div>
        </div>

        {/* Executive Team */}
        <div className="mt-20">
            <h3 className="text-3xl font-bold text-center text-[#0a5138] mb-12">Executive Team</h3>
            <div className="grid md:grid-cols-3 gap-8">
                {EXECUTIVES.map((exec) => (
                <div key={exec.id} className="bg-white rounded-xl shadow-lg overflow-hidden text-center group">
                    <div className="h-64 overflow-hidden">
                        <img src={exec.image} alt={exec.name}
                            className="w-full h-full object-cover group-hover:scale-110 transition duration-500" />
                    </div>
                    <div className="p-6">
                        <h4 className="font-bold text-lg">{exec.name}</h4>
                        <p className="text-sm text-[#ca8a04] font-medium mt-1">{lang === 'th' ? exec.roleTh : exec.role}
                        </p>
                    </div>
                </div>
                ))}
            </div>
        </div>
    </div>
</div>
);
};

const RegistrationForm = ({ lang }) => {
const t = TRANSLATIONS[lang].register;
const tFields = t.fields;

const [currentStep, setCurrentStep] = useState(0);
const [isProcessing, setIsProcessing] = useState(false);
const [isSuccess, setIsSuccess] = useState(false);
const [qualificationsChecked, setQualificationsChecked] = useState(new Array(5).fill(false));
const [formData, setFormData] = useState({
firstName: '', lastName: '', firstNameEn: '', lastNameEn: '', nickname: '',
idCard: '', birthDate: '', age: '',
height: '', weight: '', bust: '', waist: '', hips: '', disease: '',
eduLevel: '', university: '', occupation: '', talent: '', experience: '',
address: '', phone: '', line: '', facebook: '', instagram: '', tiktok: '',
emergency: '', emergencyRel: '', emergencyTel: '',
video: '', email: 'applicant@example.com'
});

const formRef = useRef(null);

useEffect(() => {
if (formData.birthDate) {
const birthDate = new Date(formData.birthDate);
const today = new Date();
let age = today.getFullYear() - birthDate.getFullYear();
const m = today.getMonth() - birthDate.getMonth();
if (m < 0 || (m===0 && today.getDate() < birthDate.getDate())) { age--; } setFormData(prev=> ({ ...prev, age: age }));
    }
    }, [formData.birthDate]);

    const handleChange = (e) => setFormData({...formData, [e.target.name]: e.target.value});

    const handleNext = () => {
    if (currentStep === 5) {
    handleSubmit();
    } else {
    setCurrentStep(prev => prev + 1);
    if(formRef.current) formRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    };

    const handleSubmit = () => {
    setIsProcessing(true);
    // Simulate API Call & PDF Generation
    setTimeout(() => {
    setIsProcessing(false);
    setIsSuccess(true);
    setCurrentStep(6);
    if(formRef.current) formRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, 3000);
    }

    const handleBack = () => {
    setCurrentStep(prev => prev - 1);
    if(formRef.current) formRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
    };

    const isQualifyComplete = qualificationsChecked.every(Boolean);

    const renderProgressBar = () => (
    <div className="mb-8 px-4">
        <div className="flex justify-between items-center relative">
            <div
                className="absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-0 rounded-full transform -translate-y-1/2">
                <div className="h-full bg-[#0a5138] transition-all duration-700 rounded-full" style={{ width:
                    `${(currentStep / (t.steps.length - 1)) * 100}%` }}></div>
            </div>

            {t.steps.map((step, idx) => (
            <div key={idx} className="flex flex-col items-center relative z-10 group cursor-default">
                <div className={`w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold text-xs
                    md:text-sm transition-all duration-500 border-2 ${currentStep>= idx
                    ? 'bg-[#0a5138] border-[#0a5138] text-white scale-110 shadow-md'
                    : 'bg-white border-gray-300 text-gray-400'}`}
                    >
                    {currentStep > idx ?
                    <CheckCircle size={16} /> : idx + 1}
                </div>
                <span className={`absolute top-12 w-24 text-center text-[10px] md:text-xs font-medium transition-all
                    duration-300 ${currentStep===idx ? 'text-[#0a5138] opacity-100 translate-y-0'
                    : 'text-gray-400 opacity-0 md:opacity-100' }`}>
                    {step}
                </span>
            </div>
            ))}
        </div>
    </div>
    );

    return (
    <div className="py-12 bg-[#f8fafc] min-h-screen" ref={formRef}>
        <div className="max-w-4xl mx-auto px-4">

            {/* Header Card */}
            <div className="bg-white rounded-3xl shadow-xl overflow-hidden mb-8 relative">
                <div
                    className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[#0a5138] via-[#ca8a04] to-[#0a5138]">
                </div>
                <div className="p-8 md:p-10 text-center">
                    <h2 className="text-3xl font-bold text-[#0a5138] mb-2">{t.title}</h2>
                    <p className="text-gray-500">แบบฟอร์มการรับสมัครอย่างเป็นทางการ (Official Application)</p>
                </div>
            </div>

            {/* Main Form Area */}
            <div className="bg-white rounded-3xl shadow-xl overflow-hidden min-h-[600px] flex flex-col relative">

                {/* Loading Overlay */}
                {isProcessing && (
                <div
                    className="absolute inset-0 bg-white/95 z-50 flex flex-col items-center justify-center backdrop-blur-sm animate-fade-in">
                    <div className="relative">
                        <Loader2 className="w-16 h-16 text-[#0a5138] animate-spin" />
                        <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                            <FileText className="w-6 h-6 text-[#ca8a04]" />
                        </div>
                    </div>
                    <h3 className="mt-6 text-xl font-bold text-[#0a5138]">{t.processing}</h3>
                    <p className="text-gray-500 mt-2">กรุณารอสักครู่ (Do not close this window)</p>
                </div>
                )}

                <div className="p-6 md:p-10 flex-1">
                    {!isSuccess && renderProgressBar()}
                    <div className="mt-12"></div>

                    {/* Step 0: Qualifications */}
                    {currentStep === 0 && (
                    <div className="animate-fade-in space-y-6 max-w-2xl mx-auto">
                        <div className="text-center mb-8">
                            <div
                                className="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4 text-[#ca8a04]">
                                <Star size={32} />
                            </div>
                            <h3 className="text-2xl font-bold text-gray-800">{t.sections.qualify}</h3>
                            <p className="text-gray-500 mt-2">กรุณาตรวจสอบคุณสมบัติของท่านก่อนดำเนินการต่อ</p>
                        </div>
                        <div className="space-y-3">
                            {t.qualifications.map((q, idx) => (
                            <div key={idx} className={`flex items-center p-4 rounded-xl border-2 transition-all
                                cursor-pointer ${qualificationsChecked[idx] ? 'border-[#0a5138] bg-green-50'
                                : 'border-gray-100 hover:border-gray-200' }`} onClick={()=> {
                                const newChecked = [...qualificationsChecked];
                                newChecked[idx] = !newChecked[idx];
                                setQualificationsChecked(newChecked);
                                }}
                                >
                                <div className={`w-6 h-6 rounded flex items-center justify-center mr-4 transition-colors
                                    ${qualificationsChecked[idx] ? 'bg-[#0a5138] text-white' : 'bg-gray-200' }`}>
                                    {qualificationsChecked[idx] &&
                                    <CheckCircle size={16} />}
                                </div>
                                <span className={`${qualificationsChecked[idx] ? 'text-[#0a5138] font-medium'
                                    : 'text-gray-600' }`}>{q}</span>
                            </div>
                            ))}
                        </div>
                        <div className="pt-6">
                            <button disabled={!isQualifyComplete} onClick={handleNext} className={`w-full py-4
                                rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all
                                ${isQualifyComplete
                                ? 'bg-[#0a5138] text-white hover:bg-[#08422d] shadow-lg hover:shadow-xl transform hover:-translate-y-1'
                                : 'bg-gray-200 text-gray-400 cursor-not-allowed' }`}>
                                {t.btnNext}
                                <ChevronRight />
                            </button>
                        </div>
                    </div>
                    )}

                    {/* Step 1: Personal Info */}
                    {currentStep === 1 && (
                    <div className="animate-slide-in">
                        <h3 className="section-title">{t.sections.personal}</h3>
                        <div className="flex flex-wrap justify-between">
                            <InputGroup label={tFields.firstName} name="firstName" value={formData.firstName}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.lastName} name="lastName" value={formData.lastName}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.firstNameEn} name="firstNameEn" value={formData.firstNameEn}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.lastNameEn} name="lastNameEn" value={formData.lastNameEn}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.nickname} name="nickname" value={formData.nickname}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.idCard} name="idCard" value={formData.idCard}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.birthDate} name="birthDate" type="date"
                                value={formData.birthDate} onChange={handleChange} width="half" required />
                            <div className="w-full md:w-[48%] mb-4">
                                <label className="block text-sm font-medium text-gray-700 mb-1">{tFields.age}</label>
                                <input value={formData.age} disabled
                                    className="w-full p-3 border rounded-xl bg-gray-100 text-gray-500 cursor-not-allowed" />
                            </div>
                        </div>
                    </div>
                    )}

                    {/* Step 2: Body & Health */}
                    {currentStep === 2 && (
                    <div className="animate-slide-in">
                        <h3 className="section-title">{t.sections.body}</h3>
                        <div className="flex flex-wrap justify-between">
                            <InputGroup label={tFields.height} name="height" type="number" value={formData.height}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.weight} name="weight" type="number" value={formData.weight}
                                onChange={handleChange} width="half" required />
                            <div className="w-full flex gap-4 mb-4">
                                <InputGroup label={tFields.bust} name="bust" value={formData.bust}
                                    onChange={handleChange} width="full" placeholder="32" />
                                <InputGroup label={tFields.waist} name="waist" value={formData.waist}
                                    onChange={handleChange} width="full" placeholder="24" />
                                <InputGroup label={tFields.hips} name="hips" value={formData.hips}
                                    onChange={handleChange} width="full" placeholder="35" />
                            </div>
                            <InputGroup label={tFields.disease} name="disease" value={formData.disease}
                                onChange={handleChange} width="full" placeholder="ระบุ (ถ้าไม่มีให้ใส่ -)" />
                        </div>
                    </div>
                    )}

                    {/* Step 3: Edu & Work */}
                    {currentStep === 3 && (
                    <div className="animate-slide-in">
                        <h3 className="section-title">{t.sections.education}</h3>
                        <SelectGroup label={tFields.eduLevel} name="eduLevel" value={formData.eduLevel}
                            onChange={handleChange} options={["มัธยมศึกษาตอนปลาย", "อนุปริญญา / ปวส." , "ปริญญาตรี"
                            , "ปริญญาโท" , "ปริญญาเอก" ]} required />
                        <InputGroup label={tFields.university} name="university" value={formData.university}
                            onChange={handleChange} required />
                        <InputGroup label={tFields.occupation} name="occupation" value={formData.occupation}
                            onChange={handleChange} required />
                        <div className="mt-6 pt-6 border-t border-gray-100">
                            <h4 className="font-bold text-gray-800 mb-4">ข้อมูลเพิ่มเติม</h4>
                            <InputGroup label={tFields.talent} name="talent" value={formData.talent}
                                onChange={handleChange} placeholder="ร้องเพลง, เต้น, เดินแบบ, etc." />
                            <InputGroup label={tFields.experience} name="experience" value={formData.experience}
                                onChange={handleChange} placeholder="ระบุเวทีและปีที่ประกวด (ถ้ามี)" />
                        </div>
                    </div>
                    )}

                    {/* Step 4: Contact */}
                    {currentStep === 4 && (
                    <div className="animate-slide-in">
                        <h3 className="section-title">{t.sections.contact}</h3>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">ที่อยู่ปัจจุบัน</label>
                            <textarea name="address" rows="3" value={formData.address} onChange={handleChange}
                                className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-[#0a5138] focus:border-transparent transition-all outline-none"></textarea>
                        </div>
                        <div className="flex flex-wrap justify-between">
                            <InputGroup label={tFields.phone} name="phone" value={formData.phone}
                                onChange={handleChange} width="half" required />
                            <InputGroup label={tFields.line} name="line" value={formData.line} onChange={handleChange}
                                width="half" required />
                            <InputGroup label="Email" name="email" type="email" value={formData.email}
                                onChange={handleChange} width="full" required />
                        </div>
                        <div className="bg-blue-50 p-6 rounded-xl border border-blue-100 mt-4 mb-6">
                            <h4 className="font-bold text-blue-800 mb-4 flex items-center gap-2">
                                <Facebook size={18} /> Social Media
                            </h4>
                            <div className="flex flex-wrap justify-between">
                                <InputGroup label={tFields.facebook} name="facebook" value={formData.facebook}
                                    onChange={handleChange} width="half" />
                                <InputGroup label={tFields.instagram} name="instagram" value={formData.instagram}
                                    onChange={handleChange} width="half" />
                                <InputGroup label={tFields.tiktok} name="tiktok" value={formData.tiktok}
                                    onChange={handleChange} width="half" />
                            </div>
                        </div>
                        <div className="bg-red-50 p-6 rounded-xl border border-red-100">
                            <h4 className="font-bold text-red-800 mb-4 flex items-center gap-2">
                                <AlertCircle size={18} /> {tFields.emergency}
                            </h4>
                            <div className="flex flex-wrap justify-between">
                                <InputGroup label="ชื่อผู้ติดต่อ" name="emergency" value={formData.emergency}
                                    onChange={handleChange} width="full" required />
                                <InputGroup label={tFields.emergencyRel} name="emergencyRel"
                                    value={formData.emergencyRel} onChange={handleChange} width="half" required />
                                <InputGroup label={tFields.emergencyTel} name="emergencyTel"
                                    value={formData.emergencyTel} onChange={handleChange} width="half" required />
                            </div>
                        </div>
                    </div>
                    )}

                    {/* Step 5: Evidence */}
                    {currentStep === 5 && (
                    <div className="animate-slide-in">
                        <h3 className="section-title">{t.sections.media}</h3>

                        <div
                            className="bg-yellow-50 border border-yellow-200 p-5 rounded-xl flex gap-4 text-sm text-yellow-800 mb-8 shadow-sm">
                            <div className="bg-yellow-100 p-2 rounded-full h-fit">
                                <Award className="text-yellow-600" size={24} />
                            </div>
                            <div>
                                <p className="font-bold text-base mb-1">ค่าธรรมเนียมการสมัคร: 500 บาท</p>
                                <p>ธนาคาร: <strong>กสิกรไทย (K-Bank)</strong></p>
                                <p>เลขที่บัญชี: <strong>XXX-X-XXXXX-X</strong></p>
                                <p>ชื่อบัญชี: <strong>บริษัท มิส เวลเนส เวิลด์ จำกัด</strong></p>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <FileUpload label="สลิปโอนเงิน (Payment Slip)" icon={FileText} onFileChange={()=>{}} />
                                <FileUpload label="รูปถ่ายหน้าตรง (Portrait)" icon={ImageIcon} onFileChange={()=>{}} />
                                    <FileUpload label="รูปถ่ายเต็มตัว (Full Body)" icon={ImageIcon} onFileChange={()=>
                                        {}} />
                                        <FileUpload label="รูปถ่ายครึ่งตัว (Half Body)" icon={ImageIcon}
                                            onFileChange={()=>{}} />
                        </div>

                        <InputGroup label={tFields.video} name="video" value={formData.video} onChange={handleChange}
                            placeholder="https://youtube.com/..." required />
                    </div>
                    )}

                    {/* Step 6: Success */}
                    {currentStep === 6 && (
                    <div className="text-center py-10 animate-scale-in">
                        <div
                            className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-green-200 shadow-xl">
                            <CheckCircle className="text-[#0a5138]" size={64} />
                        </div>
                        <h3 className="text-3xl font-bold text-gray-800 mb-4">{t.success}</h3>
                        <p className="text-gray-600 max-w-lg mx-auto mb-2">{t.successDesc} <span
                                className="font-bold text-[#0a5138]">{formData.email}</span></p>
                        <p className="text-gray-500 text-sm mb-8">{t.checkEmail}</p>

                        <div className="flex flex-col sm:flex-row gap-4 justify-center">
                            <button
                                className="px-8 py-3 bg-[#0a5138] text-white rounded-full font-bold hover:bg-[#08422d] transition shadow-lg flex items-center justify-center gap-2">
                                <Download size={20} />
                                {t.downloadPdf}
                            </button>
                            <button onClick={()=> window.location.reload()} className="px-8 py-3 border-2
                                border-gray-200 text-gray-600 rounded-full font-bold hover:bg-gray-50 transition">
                                กลับสู่หน้าหลัก
                            </button>
                        </div>
                    </div>
                    )}

                </div>

                {/* Footer Navigation Buttons */}
                {currentStep > 0 && currentStep < 6 && ( <div
                    className="bg-gray-50 px-10 py-6 border-t border-gray-200 flex justify-between items-center">
                    <button onClick={handleBack}
                        className="flex items-center gap-2 px-6 py-3 rounded-xl text-gray-600 font-bold hover:bg-gray-200 transition">
                        <ChevronLeft size={20} /> {t.btnBack}
                    </button>

                    <button onClick={handleNext}
                        className="flex items-center gap-2 px-8 py-3 rounded-xl bg-[#0a5138] text-white font-bold hover:bg-[#08422d] shadow-lg hover:shadow-xl hover:-translate-y-1 transition">
                        {currentStep === 5 ? t.btnSubmit : t.btnNext}
                        {currentStep
                        < 5 && <ChevronRight size={20} />}
                    </button>
            </div>
            )}
        </div>

    </div>

    <style>
        {
            ` .section-title {
                font-size: 1.5rem;
                font-weight: 700;
                color: #0a5138;
                margin-bottom: 1.5rem;
                padding-bottom: 0.75rem;
                border-bottom: 2px solid #f1f5f9;
            }

            @keyframes slide-in {
                from {
                    opacity: 0;
                    transform: translateX(20px);
                }

                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            .animate-slide-in {
                animation: slide-in 0.4s ease-out forwards;
            }

            @keyframes scale-in {
                from {
                    opacity: 0;
                    transform: scale(0.9);
                }

                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            .animate-scale-in {
                animation: scale-in 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            }

            @keyframes fade-in {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            .animate-fade-in {
                animation: fade-in 0.3s ease-out forwards;
            }

            @keyframes fade-in-down {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .animate-fade-in-down {
                animation: fade-in-down 0.3s ease-out forwards;
            }

            @keyframes fade-in-up {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .animate-fade-in-up {
                animation: fade-in-up 0.8s ease-out forwards;
            }

            `
        }
    </style>
    </div>
    );
    };

    const VotePage = ({ lang }) => {
    const t = TRANSLATIONS[lang].vote;
    return (
    <div className="py-12 bg-[#f0f9ff] min-h-screen">
        <div className="max-w-7xl mx-auto px-4">
            <div className="text-center mb-10">
                <h2 className="text-4xl font-bold text-[#0a5138]">{t.title}</h2>
                <p className="text-gray-600 mt-2">{t.subtitle}</p>
            </div>

            <div className="relative max-w-xl mx-auto mb-12">
                <input type="text" placeholder={t.search}
                    className="w-full pl-12 pr-4 py-4 rounded-full border-0 shadow-lg focus:ring-2 focus:ring-[#ca8a04] outline-none" />
                <Search className="absolute left-4 top-4 text-gray-400" />
            </div>

            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                {MOCK_CONTESTANTS.map((c) => (
                <div key={c.id}
                    className="bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition duration-300 group">
                    <div className="relative h-96 overflow-hidden">
                        <img src={c.image} alt={c.name}
                            className="w-full h-full object-cover group-hover:scale-110 transition duration-700" />
                        <div
                            className="absolute top-4 right-4 bg-[#ca8a04] text-white font-bold py-1 px-3 rounded-lg shadow-md backdrop-blur-md bg-opacity-90">
                            {c.number}
                        </div>
                        <div
                            className="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-4 pt-12">
                            <h3 className="text-white font-bold text-lg">{lang === 'th' ? c.nameTh : c.name}</h3>
                            <p className="text-gray-300 text-sm flex items-center gap-1">
                                <MapPin size={12} /> {lang === 'th' ? c.provinceTh : c.province}
                            </p>
                        </div>
                    </div>
                    <div className="p-4">
                        <div className="flex justify-between items-center mb-4 text-sm">
                            <span className="text-gray-500">Popular Vote</span>
                            <span className="font-bold text-[#0a5138] text-lg">{c.votes.toLocaleString()}</span>
                        </div>
                        <button
                            className="w-full py-3 bg-[#0a5138] text-white rounded-xl font-bold hover:bg-[#08422d] transition flex items-center justify-center gap-2">
                            <Heart size={18} fill="currentColor" />
                            {t.voteBtn}
                        </button>
                    </div>
                </div>
                ))}

                {/* Coming Soon Placeholders */}
                {[1, 2, 3, 4].map((i) => (
                <div key={`p-${i}`}
                    className="bg-white/50 border-2 border-dashed border-gray-200 rounded-2xl h-[450px] flex flex-col items-center justify-center text-gray-400">
                    <User size={48} className="mb-2 opacity-20" />
                    <span className="font-medium">Coming Soon</span>
                </div>
                ))}
            </div>
        </div>
    </div>
    )
    }

    const Footer = () => (
    <footer className="bg-[#1e293b] text-white py-12 border-t border-gray-800">
        <div className="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
            <div>
                <h4 className="font-bold text-xl text-[#ca8a04] mb-4">Miss Wellness World</h4>
                <p className="text-gray-400 text-sm">
                    งามอย่างสร้างสรรค์เพื่อสุขภาวะที่ยั่งยืน<br />มุ่งมั่นที่จะค้นหาและพัฒนาสตรีไทยสู่เวทีโลก</p>
            </div>
            <div>
                <h4 className="font-bold text-xl text-[#ca8a04] mb-4">Contact</h4>
                <div className="space-y-2 text-sm text-gray-400 flex flex-col items-center md:items-start">
                    <p className="flex items-center gap-2">
                        <Phone size={14} /> 02-XXX-XXXX
                    </p>
                    <p className="flex items-center gap-2">
                        <Mail size={14} /> info@misswellnessworld.com
                    </p>
                </div>
            </div>
            <div>
                <h4 className="font-bold text-xl text-[#ca8a04] mb-4">Follow Us</h4>
                <div className="flex justify-center md:justify-start gap-4">
                    <div className="p-2 bg-white/10 rounded-full hover:bg-[#ca8a04] transition cursor-pointer">
                        <Facebook size={20} />
                    </div>
                    <div className="p-2 bg-white/10 rounded-full hover:bg-[#ca8a04] transition cursor-pointer">
                        <Instagram size={20} />
                    </div>
                    <div className="p-2 bg-white/10 rounded-full hover:bg-[#ca8a04] transition cursor-pointer">
                        <Youtube size={20} />
                    </div>
                </div>
            </div>
        </div>
        <div className="text-center text-gray-600 text-xs mt-12">
            © 2025 Miss Wellness World Thailand. All rights reserved.
        </div>
    </footer>
    )

    export default function App() {
    const [activeTab, setActiveTab] = useState('home');
    const [lang, setLang] = useState('th');

    return (
    <div className="min-h-screen bg-white font-sans text-gray-900 selection:bg-[#ca8a04] selection:text-white">
        <Navbar activeTab={activeTab} setActiveTab={setActiveTab} lang={lang} setLang={setLang} />
        {activeTab === 'home' && (
        <div className="animate-fade-in">
            <HeroSection onRegisterClick={()=> setActiveTab('register')} lang={lang} />
                <AboutSection lang={lang} />
        </div>
        )}
        {activeTab === 'about' &&
        <AboutSection lang={lang} />}
        {activeTab === 'vote' &&
        <VotePage lang={lang} />}
        {activeTab === 'register' &&
        <RegistrationForm lang={lang} />}
        <Footer />
    </div>
    );
    }